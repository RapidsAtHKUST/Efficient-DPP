<?xml version='1.0' encoding='UTF-8'?>

<bag xmlns:boolean="http://www.w3.org/2001/XMLSchema#boolean" xmlns:exsl="http://exslt.org/common" xmlns:int="http://www.w3.org/2001/XMLSchema#int" xmlns:unsignedInt="http://www.w3.org/2001/XMLSchema#unsignedInt" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <internal name="%PMUEventsViewpointName" description="%PMUEventsViewpointDescription" shortName="%PMUEventsViewpointShortName">
  <int:schemaVersion>1</int:schemaVersion>
  <int:contentVersion>24</int:contentVersion>
 </internal>
 <prerequisites syntax="norules">
  <requiredData groupOperation="or">
   <queryRef>/PMUEventType</queryRef>
   <queryRef>/UncoreEventType</queryRef>
  </requiredData>
 </prerequisites>
 <viewpoint xsl:version="1.0" exsl:keep_exsl_namespace="">
  <pane id="bottomUpPane" placeId="resultsArea"/>
  <pane id="sampleCountBottomUpPane" placeId="resultsArea"/>
  <pane id="uncoreBottomUpPane" placeId="resultsArea"/>
  <pane id="flatProfilePane" placeId="resultsArea"/>
  <pane id="callersPane" placeId="topSideArea"/>
  <pane id="calleesPane" placeId="bottomSideArea"/>
  <pane id="summaryPane" placeId="resultsArea"/>
  <pane id="quickFilterPane" placeId="filterArea"/>
  <pane id="stackPane" placeId="sideArea"/>
  <pane id="eventCountTimelinePane" placeId="bottomArea"/>
  <pane id="sampleCountTimelinePane" placeId="bottomArea"/>
  <pane id="uncoreTimelinePane" placeId="bottomArea"/>
  <pane id="platformTimelinePane" placeId="resultsArea"/>
  <pane id="gpuTimelinePane" placeId="bottomArea"/>
  <pane id="topDownPane" placeId="resultsArea"/>
  <pane id="gpuDiagramPane" placeId="bottomArea"/>
  <xsl:variable name="StacksCollected" select="(string($enableVTSSCollection) != 'false') or (string($collectSamplesMode) = 'stack') or (string($collectWaitsMode) = 'stack')"/>
  <xsl:variable name="TscDataCollected" select="(string(exsl:ctx('needToHideTimeline')) != 'true')"/>
  <displayLayout>
   <tab id="summary">
    <masterPane id="summaryPane"/>
   </tab>
   <tab id="eventCountBottomUp">
    <masterPane id="bottomUpPane"/>
    <xsl:if test="$TscDataCollected">
     <paneToShow id="eventCountTimelinePane"/>
    </xsl:if>
    <paneToShow id="quickFilterPane"/>
    <xsl:if test="$StacksCollected">
     <paneToShow id="stackPane"/>
    </xsl:if>
   </tab>
   <tab id="sampleCountBottomUp">
    <masterPane id="sampleCountBottomUpPane"/>
    <xsl:if test="$TscDataCollected">
     <paneToShow id="sampleCountTimelinePane"/>
    </xsl:if>
    <paneToShow id="quickFilterPane"/>
    <xsl:if test="$StacksCollected">
     <paneToShow id="stackPane"/>
    </xsl:if>
   </tab>
   <tab id="uncoreBottomUp">
    <requiredData>
     <queryRef>/UncoreEventCount</queryRef>
    </requiredData>
    <masterPane id="uncoreBottomUpPane"/>
    <paneToShow id="uncoreTimelinePane"/>
    <paneToShow id="quickFilterPane"/>
   </tab>
   <tab id="flatProfile">
    <masterPane id="flatProfilePane"/>
    <paneToShow id="callersPane"/>
    <paneToShow id="calleesPane"/>
    <paneToShow id="quickFilterPane"/>
   </tab>
   <tab id="topDown">
    <masterPane id="topDownPane"/>
    <xsl:if test="$TscDataCollected">
     <paneToShow id="timelinePane"/>
    </xsl:if>
    <paneToShow id="quickFilterPane"/>
    <xsl:if test="$StacksCollected">
     <paneToShow id="stackPane"/>
    </xsl:if>
   </tab>
   <xsl:if test="$TscDataCollected">
    <tab id="tasks">
     <masterPane id="platformTimelinePane"/>
     <paneToShow id="quickFilterPane"/>
     <xsl:if test="$StacksCollected">
      <paneToShow id="stackPane"/>
     </xsl:if>
    </tab>
   </xsl:if>
   <tab id="bottomBottomUpAndGPUMetrics">
    <displayName>%GraphicsTabName</displayName>
    <requiredData groupOperation="or">
     <queryRef>/GPUEventCount</queryRef>
     <queryRef>/GPUTime</queryRef>
     <queryRef>/GPUComputeTaskTime</queryRef>
    </requiredData>
    <paneToShow id="bottomUpPane"/>
    <paneToShow id="quickFilterPane"/>
    <xsl:if test="$StacksCollected">
     <paneToShow id="stackPane"/>
    </xsl:if>
    <masterPane id="gpuTimelinePane"/>
    <xsl:if test="exsl:ctx('targetOS')='Windows' or exsl:ctx('targetOS')='Linux'">
     <paneToShow id="gpuDiagramPane"/>
    </xsl:if>
   </tab>
   <defaultTab id="summary"/>
  </displayLayout>
  <diveLayout id="srcAsmPane" placeId="resultsArea">
   <xsl:if test="$StacksCollected">
    <paneToShow id="stackPane"/>
   </xsl:if>
  </diveLayout>
 </viewpoint>
 <paneLibrary xsl:version="1.0" exsl:keep_exsl_namespace="">
  <xsl:variable name="stripchartpanes" select="document('config://viewpoint/include/stripchartpanes.cfg')"/>
  <quickFilter id="quickFilterPane" displayName="%FilterBar">
   <section filterToUse="global" boolean:includeAll="true">
    <filterBy>
     <queryRef>/Process/Thread/PMUModule</queryRef>
    </filterBy>
   </section>
   <knobsToShow>
    <knobToShow idToUse="calleeAttributionMode"/>
    <knobToShow idToUse="inlineAttributionMode"/>
    <knobToShow idToUse="loopAttributionMode"/>
   </knobsToShow>
  </quickFilter>
  <stack id="stackPane" displayName="%CallStackTab">
   <xsl:variable name="stackpane" select="document('config://viewpoint/include/stackpane.cfg')"/>
   <helpKeywordF1>configs.stack_pane_f1020</helpKeywordF1>
   <description>%ParallelismStackWindowDescription</description>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <xsl:copy-of select="$stackpane//layer[@displayName='%PMUFunctionStackDOI']"/>
   <xsl:copy-of select="$stackpane//layer[@displayName='%ContextSwitchTimeCallStack']"/>
   <xsl:copy-of select="$stackpane//layer[@displayName='%QuantumInactiveTimeCallStack']"/>
   <xsl:copy-of select="$stackpane//layer[@displayName='%QuantumWaitTimeCallStack']"/>
   <xsl:copy-of select="$stackpane//layer[@displayName='%ContextSwitchCountCallStack']"/>
   <xsl:copy-of select="$stackpane//layer[@displayName='%PreemptionContextSwitchCountCallStack']"/>
   <xsl:copy-of select="$stackpane//layer[@displayName='%SynchronizationContextSwitchCountCallStack']"/>
  </stack>
  <bottomUp id="bottomUpPane" displayName="%EventCountBottomUpWindow">
   <description>%PMUEventsBottomUpWindowDescription</description>
   <helpKeywordF1>configs.pmu_events_f1199</helpKeywordF1>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <errorMessage id="noData">%ErrorNoDataEBS</errorMessage>
   <rowBy>
    <vectorQueryInsert>/PMUGridRowBy</vectorQueryInsert>
    <sort>
     <queryRef>/MySorting</queryRef>
    </sort>
   </rowBy>
   <columnBy>
    <queryInherit>/ViewpointGUIandCLIColumns</queryInherit>
   </columnBy>
   <groupingItems>
    <queryInherit>/BottomUpGroupingItems</queryInherit>
   </groupingItems>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
  </bottomUp>
  <bottomUp id="sampleCountBottomUpPane" displayName="%EventSampleCountBottomUpWindow">
   <description>%PMUSamplesBottomUpWindowDescription</description>
   <helpKeywordF1>configs.bottom_up_f1109</helpKeywordF1>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <errorMessage id="noData">%ErrorNoDataEBS</errorMessage>
   <rowBy>
    <vectorQueryInsert>/PMUGridRowBy</vectorQueryInsert>
    <sort>
     <queryRef>/MySorting</queryRef>
    </sort>
   </rowBy>
   <columnBy>
    <queryInherit>/PMUSamplesGUIandCLIColumns</queryInherit>
   </columnBy>
   <groupingItems>
    <queryInherit>/BottomUpGroupingItems</queryInherit>
   </groupingItems>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
  </bottomUp>
  <topDown id="flatProfilePane" displayName="%CallerCalleeWindow">
   <description>%PMUEventsCallerCalleeWindowDescription</description>
   <helpKeywordF1>configs.caller_f1048</helpKeywordF1>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <errorMessage id="noData">%ErrorNoDataHotspots</errorMessage>
   <rowBy>
    <queryRef>/FlatProfileFunction</queryRef>
    <sort>
     <queryRef>/MySorting</queryRef>
    </sort>
   </rowBy>
   <columnBy>
    <queryInherit>/ViewpointGUIandCLIColumns</queryInherit>
   </columnBy>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
   <queryMode>flatProfile</queryMode>
  </topDown>
  <bottomUp id="callersPane" displayName="%CallerCalleeWindow">
   <description>%PMUEventsCallerCalleeWindowDescription</description>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <errorMessage id="noData">%ErrorNoDataHotspots</errorMessage>
   <rowBy>
    <queryRef>/FlatProfileCallers</queryRef>
    <sort>
     <queryRef>/MySorting</queryRef>
    </sort>
   </rowBy>
   <columnBy>
    <queryInherit>/PMUEventsDataColumns</queryInherit>
   </columnBy>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
   <displayAttributes>
    <boolean:displayRecursiveRowsInChain>false</boolean:displayRecursiveRowsInChain>
    <unsignedInt:expandLevels>1</unsignedInt:expandLevels>
   </displayAttributes>
   <boolean:slaveMode>true</boolean:slaveMode>
   <queryMode>selectionParentTree</queryMode>
  </bottomUp>
  <topDown id="calleesPane" displayName="%CallerCalleeWindow">
   <description>%PMUEventsCallerCalleeWindowDescription</description>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <errorMessage id="noData">%ErrorNoDataHotspots</errorMessage>
   <rowBy>
    <queryRef>/FlatProfileCallees</queryRef>
    <sort>
     <queryRef>/MySorting</queryRef>
    </sort>
   </rowBy>
   <columnBy>
    <queryInherit>/PMUEventsDataColumns</queryInherit>
   </columnBy>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
   <displayAttributes>
    <unsignedInt:expandLevels>1</unsignedInt:expandLevels>
   </displayAttributes>
   <boolean:slaveMode>true</boolean:slaveMode>
   <queryMode>selectionChildTree</queryMode>
  </topDown>
  <topDown id="topDownPane" displayName="%TopDownTreeWindow">
   <description>%PMUEventsTopDownTreeWindowDescription</description>
   <helpKeywordF1>configs.interpret_calltree_f1030</helpKeywordF1>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <errorMessage id="noData">%ErrorNoDataEBS</errorMessage>
   <rowBy>
    <vectorQueryInsert>/TopDownGridRowBy</vectorQueryInsert>
    <sort>
     <queryRef>/MySorting</queryRef>
    </sort>
   </rowBy>
   <columnBy>
    <queryInherit>/ViewpointGUIandCLIColumns</queryInherit>
   </columnBy>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
  </topDown>
  <xsl:variable name="summaryPane">
   <params description="PMUEventsSummaryWindowDescription" enableLinksInSummaryInfo="false" showCPUGPUUsage="true" showGPUHotspots="true" showPMUEvents="true" showUncoreEvents="true" querySuffix="PMU"/>
  </xsl:variable>
  <xsl:variable name="summaryFileName">
   <xsl:text>config://viewpoint/include/summary.xsl?</xsl:text>
   <xsl:for-each select="exsl:node-set($summaryPane)//@*">
    <xsl:value-of select="concat(name(), '=', .)"/>
    <xsl:text>&amp;</xsl:text>
   </xsl:for-each>
  </xsl:variable>
  <xsl:copy-of select="document($summaryFileName)"/>
  <xsl:variable name="eventCountTimelinePane">
   <params id="eventCountTimelinePane" displayName="TimelineWindow" description="PMUEventsTimelineWindowDescription" globalEventAreaName="PMUEvents" cpuDataQuery="PMUEventCount/PMUEventType" cpuDataByThreadQuery="PMUEventCount/PMUEventType" taskQuery="Task" helpKeyword="configs.timeline_f1106" visibleSeriesCount="1" rawEventCount="true"/>
  </xsl:variable>
  <xsl:variable name="eventCountTimelinePaneFileName">
   <xsl:text>config://viewpoint/include/timeline.xsl?</xsl:text>
   <xsl:for-each select="exsl:node-set($eventCountTimelinePane)//@*">
    <xsl:value-of select="concat(name(), '=', .)"/>
    <xsl:text>&amp;</xsl:text>
   </xsl:for-each>
  </xsl:variable>
  <xsl:copy-of select="document($eventCountTimelinePaneFileName)"/>
  <xsl:variable name="sampleCountTimelinePane">
   <params id="sampleCountTimelinePane" displayName="TimelineWindow" description="PMUSamplesTimelineWindowDescription" globalEventAreaName="PMUSamples" cpuDataQuery="PMUSampleCount/PMUEventType" helpKeyword="configs.timeline_f1106" sortByCPUData="true" taskQuery="Task" visibleSeriesCount="1" rawEventSampleCount="true"/>
  </xsl:variable>
  <xsl:variable name="sampleCountTimelinePaneFileName">
   <xsl:text>config://viewpoint/include/timeline.xsl?</xsl:text>
   <xsl:for-each select="exsl:node-set($sampleCountTimelinePane)//@*">
    <xsl:value-of select="concat(name(), '=', .)"/>
    <xsl:text>&amp;</xsl:text>
   </xsl:for-each>
  </xsl:variable>
  <xsl:copy-of select="document($sampleCountTimelinePaneFileName)"/>
  <timeline id="uncoreTimelinePane" displayName="%UncoreTimelineWindow">
   <helpKeywordF1>configs.uncore_events_f1213</helpKeywordF1>
   <description>%PMUEventsTimelineWindowDescription</description>
   <icon file="client.dat#zip:images.xrc" image="tab_timeline"/>
   <ruler>
    <xsl:copy-of select="$stripchartpanes//config[@id='mark']/configRulerLayers/*"/>
    <xsl:copy-of select="$stripchartpanes//config[@id='frameSimple']/configRulerLayers/*"/>
   </ruler>
   <xsl:copy-of select="$stripchartpanes//config[@id='uncoreEvents']/*"/>
   <xsl:copy-of select="$stripchartpanes//config[@id='frameSimple']/configAreas/*"/>
  </timeline>
  <xsl:variable name="platformTimelinePane">
   <params id="platformTimelinePane" displayName="TaskTimelineWithData" description="TaskTimelineWithDataDescription" tasksAndFrames="true" globalEventAreaName="PMUEvents" headerMode="rich" cpuDataQuery="PMUEventCount/PMUEventType" cpuDataByThreadQuery="PMUEventCount/PMUEventType" contextSwitches="true" helpKeyword="configs.tasks_f1330" frameMode="frameDetailed" visibleSeriesCount="1" rawEventCount="true" uncoreEvents="true"/>
  </xsl:variable>
  <xsl:variable name="platformTimelinePaneFileName">
   <xsl:text>config://viewpoint/include/timeline.xsl?</xsl:text>
   <xsl:for-each select="exsl:node-set($platformTimelinePane)//@*">
    <xsl:value-of select="concat(name(), '=', .)"/>
    <xsl:text>&amp;</xsl:text>
   </xsl:for-each>
  </xsl:variable>
  <xsl:copy-of select="document($platformTimelinePaneFileName)"/>
  <xsl:variable name="gpuTimelinePane">
   <params id="gpuTimelinePane" displayName="GPUTimelineWindow" description="HotspotsAndGPUTimelineWindowDescription" globalEventAreaName="PMUEvents" cpuDataQuery="PMUEventCount/PMUEventType" taskQuery="Task" helpKeyword="configs.graphics_f1337" gpu="true" gpuCounters="{$gpuCounters}" visibleSeriesCount="1" rawEventCount="true"/>
  </xsl:variable>
  <xsl:variable name="gpuTimelinePaneFileName">
   <xsl:text>config://viewpoint/include/timeline.xsl?</xsl:text>
   <xsl:for-each select="exsl:node-set($gpuTimelinePane)//@*">
    <xsl:value-of select="concat(name(), '=', .)"/>
    <xsl:text>&amp;</xsl:text>
   </xsl:for-each>
  </xsl:variable>
  <xsl:copy-of select="document($gpuTimelinePaneFileName)"/>
  <bottomUp id="uncoreBottomUpPane" displayName="%UncoreEvent">
   <description>%PMUEventsBottomUpWindowDescription</description>
   <helpKeywordF1>configs.bottom_up_f1109</helpKeywordF1>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <errorMessage id="noData">%ErrorNoDataEBS</errorMessage>
   <rowBy>
    <queryRef>/UncorePackage</queryRef>
    <vectorQueryInsert>/PMUGridRowBy</vectorQueryInsert>
    <default>
     <queryRef>/UncorePackage</queryRef>
    </default>
    <sort>
     <queryRef>/MySorting</queryRef>
    </sort>
   </rowBy>
   <columnBy>
    <vectorQueryInsert>/UncoreDataColumns</vectorQueryInsert>
    <vectorQueryInsert>/PMUEventsGUIandCLIColumns</vectorQueryInsert>
   </columnBy>
   <groupingItems>
    <queryInherit>/BottomUpGroupingItems</queryInherit>
   </groupingItems>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
  </bottomUp>
  <srcAsm id="srcAsmPane">
   <asmWindow>
    <helpKeywordF1>configs.find_problem_asm_pane_f1041</helpKeywordF1>
    <rowBy>
     <vectorQueryInsert>/PMUAsmPaneRowBy</vectorQueryInsert>
    </rowBy>
    <columnBy>
     <queryRef>/PMUSourceLine</queryRef>
     <queryRef>/PMUAssemblyContent</queryRef>
     <vectorQueryInsert>/PMUEventsDataColumns</vectorQueryInsert>
     <vectorQueryInsert>/PMUSamplesDataColumns</vectorQueryInsert>
    </columnBy>
    <queryMode>flatProfile</queryMode>
   </asmWindow>
   <srcWindow>
    <helpKeywordF1>configs.find_problem_src_pane_f1040</helpKeywordF1>
    <rowBy>
     <queryRef>/PMUSourceLineFlat</queryRef>
    </rowBy>
    <columnBy>
     <queryRef>/PMUSourceContent</queryRef>
     <vectorQueryInsert>/PMUEventsDataColumns</vectorQueryInsert>
     <vectorQueryInsert>/PMUSamplesDataColumns</vectorQueryInsert>
    </columnBy>
    <queryMode>flatProfile</queryMode>
   </srcWindow>
   <fileSearchWindow>
    <helpKeywordF1>configs.find_file_type_f1072</helpKeywordF1>
   </fileSearchWindow>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
  </srcAsm>
  <xsl:copy-of select="document('config://viewpoint/include/diagram.xsl')"/>
 </paneLibrary>
 <queryLibrary>
  <vectorQuery id="ViewpointGUIandCLIColumns">
   <vectorQueryInsert>/PMUEventsGUIandCLIColumns</vectorQueryInsert>
  </vectorQuery>
  <vectorQuery id="MySummaryColumns">
   <queryRef>/RefTime</queryRef>
   <queryRef>/QuantumWaitTime</queryRef>
   <queryRef>/QuantumInactiveTime</queryRef>
  </vectorQuery>
  <vectorQuery id="MySorting">
   <queryRef>/DataOfInterest</queryRef>
  </vectorQuery>
  <countQuery id="DataOfInterest">
   <queryInherit>/Clockticks</queryInherit>
  </countQuery>
 </queryLibrary>
</bag>
